# init_script.py
from app import db
from app.models import User, Section
from werkzeug.security import generate_password_hash

print("Eliminando base de datos anterior...")
db.drop_all()
print("Creando nuevas tablas...")
db.create_all()

admin = User(
    username='admin',
    email='admin@example.com',
    password_hash=generate_password_hash('admin', method='sha256'),
    is_admin=True
)
db.session.add(admin)

general = Section(
    title='General',
    description='Temas de conversación general.'
)
db.session.add(general)

db.session.commit()
print("✅ Base de datos inicializada.")